# Геометрия Лобачевского (гиперболическая геометрия)

Далее кратко будет называться просто гиперболика. 

2D пространство с гиперболической геометрией обозначается как H<sup>2</sup>, аналогично 3D как H<sup>3</sup>. Обычное евклидово пространство обозначается буквой E, например: E, E<sup>2</sup>, E<sup>3</sup>, E<sup>4</sup>.

Здесь будет систематизироваться интересный материал из чатика: https://t.me/metageometria

# Теоремы и аксиомы этой геометрии

В обычной евклидовой геометрии есть 5 аксиом, из которых выводится всё остальное. И среди них есть пятая аксиома:

> На плоскости через точку, не лежащую на данной прямой, можно провести одну и только одну прямую, параллельную данной. 

В гиперболике эта аксиома отрицается:

> Через точку, не лежащую на данной прямой, проходят по крайней мере две прямые, лежащие с данной прямой в одной плоскости и не пересекающие её. 

Ещё раз: **здесь параллельные прямые не пересекаются!** Они пересекаются в сферической геометрии.

Из этой аксиомы следует что через данную точку проходит бесконечно много прямых, не пересекающих данной. Изображается это так:

[![](/img/5_axiom.png)](https://ru.wikipedia.org/wiki/%D0%93%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%9B%D0%BE%D0%B1%D0%B0%D1%87%D0%B5%D0%B2%D1%81%D0%BA%D0%BE%D0%B3%D0%BE#/media/%D0%A4%D0%B0%D0%B9%D0%BB:Klein_model.svg)

Так же есть изображения, хорошо показывающие основные различия всех трёх известных геометрий:

[![](/img/comparison_spaces.png)](https://web.archive.org/web/20180715221111/http://pmrb.net/blog/tag/non-euclidean-geometry/)

[![](/img/triangles_spaces.png)](https://web.archive.org/web/20180715221111/http://pmrb.net/blog/tag/non-euclidean-geometry/)

# Книги

Книга [Атанасян Л.С. Геометрия Лобачевского](https://t.me/metageometria/417)

Книга [Прасолов В.В. Геометрия Лобачевского](https://t.me/metageometria/418)

# Визуализация

Если подумать: как нам визуализировать евклидову геометрию? Да очень легко! Просто берём 2D листок и рисуем на нём, ведь наш мир евклидовый! А гиперболическую геометрию так легко не получится, для неё надо придумывать особые проекции, которые искривляют прямые линии в округлые. Аналогично как перспективная проекция изменяет расстояния и размеры для трёхмерных объектов.

## Диск Пуанкаре

[На вики.](https://en.wikipedia.org/wiki/Poincar%C3%A9_half-plane_model)

![Картинка для привлечения внимания](/img/Poincare_disc_hyperbolic_parallel_lines.svg.png)

## Верхняя полуплоскость

[На вики.](https://en.wikipedia.org/wiki/Poincar%C3%A9_half-plane_model)

![Картинка для привлечения внимания](/img/350px-Parallel_rays_in_Poincare_model_of_hyperbolic_geometry.svg.png)

Прямая представляется как полу-окружность, с центром на прямой y=0. Так, чтобы построить прямую по двум точкам, надо построить окружность по этим двум точкам. Благо ограничение с центром на прямой сокращает число неизвестных до двух. Либо это вертикальный луч.

Гиперболические окружности проецируются как окружности, но координаты центра и радиус рассчитываются по-другому: (x, y cosh(r)), r = y sinh(r)

Преобразование в диск пуанкаре делается с помощью [cayley transform](https://en.wikipedia.org/wiki/Cayley_transform#Complex_homography)

Я даже визуализировал это [здесь](https://twitter.com/optozorax/status/1207637170191785986) и [здесь](https://twitter.com/optozorax/status/1207647487252729858) (немного другое преобразование для красоты).

## Band model

[![](/img/band.png)](http://bulatov.org/math/1001/index.html#(12))

## Рейтрейсинг

А вот чтобы изобразить H<sup>3</sup>, можно использовать те же методы, что и для визуализации E<sup>3</sup>, например: перспективную проекцию и рейтрейсинг. Что, собственно, и сделали в следующем видео:

[![](http://img.youtube.com/vi/ivHG4AOkhYA/0.jpg)](http://www.youtube.com/watch?v=ivHG4AOkhYA "")

# Вычисления

[Zeno Rogue советует эту стаью для расчётов в гиперболическом пространстве.](http://library.msri.org/books/Book31/files/cannon.pdf)

## С чего я начинал

![](/img/life.gif)

Статья, где очень хорошо объясняют как симулировать плоскость Лобачевского: [ Жизнь на плоскости Лобачевского ](https://habr.com/ru/post/168421/). В ней есть ещё много чего интересного, например замкнутость пространства на самого себя, надо это изучить.

При помощи неё я нарисовал своё первое замощение и гифки интерполяции между моделью верхней полуплоскости и диска пуанкаре.

## Движение на диске Пуанкаре

[![](/img/calc.png)](https://math.stackexchange.com/questions/308339/rigid-body-motion-on-the-poincare-disc-model-of-the-hyperbolic-plane)

[Анимация движения по оси X.](https://t.me/metageometria/520)

А чтобы двигаться по оси с произвольным углом, надо просто перемножить эти матрицы так:

если обозначить первую матрицу как M(x), вторую как R(ф), то надо сделать матрицу

R(ф) * M(x) * R(-ф)

[Анимация движения под 45 градусов.](https://t.me/metageometria/522)

# Замощения

Вы, наверное знаете, что обычное двумерное пространство можно замостить правильными многоугольниками:

[![](/img/tiling.png)](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%BC%D0%BE%D1%89%D0%B5%D0%BD%D0%B8%D0%B5_%28%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F%29)

В гиперболической геометрии на это есть куда больше свободы, потому что там у любого правильного многоугольника может быть почти любой угол: в зависимости от размера, угол уменьшается. 

Происходит так потому что из 5 аксиомы следует, что треугольники равны, если равны их углы. В обычной же геометрии треугольники подобны, если равны углы. Из этого следует, что в гиперболике не существует подобия, и углы правильного многоугольника однозначно определяют его размеры. 

За счёт этого можно разгуляться со всякими замощениями, изменяя размер фигур. Например у этого замощения угол в правильных пятиугольниках равен 90 градусов:

![](/img/pentagon.jpg)

Лекция про замощения на гиперболической плоскости:

[![](http://img.youtube.com/vi/YpKWa8vrULk/0.jpg)](http://www.youtube.com/watch?v=YpKWa8vrULk "")

# Игра на гиперболике

## Майнкрафт

У меня есть желание сделать майнкрафт в H<sup>3</sup>, используя замощение пространства кубами [{4, 3, 5}](https://en.wikipedia.org/wiki/Order-5_cubic_honeycomb).

[Сначала была идея](https://t.me/metageometria/314) сделать по горизонтальной плоскости H<sup>2</sup>, а по высоте -- обычное E, чтобы по высоте работало привычно нашему восприятию, то есть пространство H<sup>2</sup>×E. Но потом я понял, что это выглядит очень некрасиво: дальние предметы выглядят сжатыми по горизонтали и очень высокими. Выглядит это так:

[Zeno Rogue H<sup>2</sup>×E video](https://www.youtube.com/watch?v=PnJ21XSjqpo)

[VR implementation of H^2 x E geometry](https://github.com/henryseg/H2xE_VR)

Поэтому я решил, что это выглядит некрасиво, и я хочу сделать майнкрафт в пространстве H<sup>3</sup>. Гравитация там будет направлена по перпендикуляру к полу. Пол проведу [примерно так](https://t.me/metageometria/378).

Рендерить это можно при помощи рейтрейсинга.

## Ограничения по памяти

Если в привычном нам евклидовом мире площадь окружности возрастает пропорционально квадрату от размера окружности, то в гиперболическом пространстве всё намного хуже:

Согласно [этому](https://www.maths.gla.ac.uk/wws/cabripages/hyperbolic/circleformulae.html) источнику, там площадь окружности возрастает как:

S = 4 pi sinh<sup>2</sup>(r/2).

Для тех кто не знает, гиперболическй синус вычисляется так:

sinh(x) = (e<sup>x</sup> - e<sup>-x</sup>)/2.

А это значит что площадь окружности растёт примерно пропорционально квадрату экспоненты, а это очень много. 

Если мы хотим хранить мир майнкрафта в виде блоков, то уже для окружности радиуса `30` у нас будет так много блоков внутри, что это не поместится ни в одну память персонального компьютера. К слову, для такого же количества блоков в евклидовом майнкрафте нам потребуется окружность радиуса `32 миллиона` блоков.

Поэтому в гиперболическом майнкрафте мы не можем позволить себе такое удовольствие как генерация мира с возможностью его изменять. Нам придётся ограничиться:
* либо плоским миром, где пользователь может поставить конечное число блоков;
* либо автогенерируемым миром, в котором нельзя ничего поменять.

Второй пункт выбрала игра [HyperRogue](http://www.roguetemple.com/z/hyper/), но она находится на 2D плоскости.

[![](http://img.youtube.com/vi/xAFrKKApHTY/0.jpg)](http://www.youtube.com/watch?v=xAFrKKApHTY "")

## Сжатость

Длина границы окружности в гиперболическом пространстве тоже измеряется через экспоненту:

L = 2 pi sinh(r)

А это значит, что на расстоянии 20 у нас будет помещаться примерно e<sup>20</sup> блоков, следовательно вдалеке мы будем видеть мир очень сжатым. И движение по такому миру будет выглядеть не как обычное движение, а как зумирование, ведь всё будет очень быстро увеличиваться в размерах.

[![](http://img.youtube.com/vi/twrn6CW-szo/0.jpg)](http://www.youtube.com/watch?v=twrn6CW-szo "")

# Интересности

## Дискретные координаты для замощений на гиперболической геометрии

Это три связанных статьи:

[What does it mean to introduce coordinate system on a regular tiling?](http://vlad-shcherbina.github.io/2015/01/04/coordinates.html)

[Coordinate system for heptagonal tiling of hyperbolic plane](http://vlad-shcherbina.github.io/2015/01/05/heptagrid-coordinates.html)

[Adjacent heptagons on hyperbolic plane](http://vlad-shcherbina.github.io/2015/01/12/adjacent-heptagons.html)

![Картинка для привлечения внимания 1](/img/coords1.png)
![Картинка для привлечения внимания 2](/img/coords2.png)

[Тоже что-то про дискретные координаты, чтобы не потерять](https://arxiv.org/pdf/1101.0530.pdf)

## Демки на гиперболической плоскости

[![](/img/demo1.png)](https://www.shadertoy.com/view/wtj3Ry)

[![](/img/demo2.png)](https://www.shadertoy.com/view/3tBGDD)

[![](/img/demo3.png)](https://www.shadertoy.com/view/3llXR4)

Анимация движения объектов в замощении квадратами:

[![](/img/demo4.png)](https://www.shadertoy.com/view/ldsfD8)

# Мемы

![](/img/meme1.jpg)

# Несортированные ссылки

[Крутая презентация про мапинг гиперболического пространства на разные фигуры.](http://bulatov.org/math/1001/index.html)

[Статья с множеством примеров игр и визуализаций гиперболического пространства.](https://medium.com/@ZenoRogue/non-euclidean-geometry-and-games-fb46989320d4)

[Статья с красивыми картинками](http://page.math.tu-berlin.de/~sullivan/L/03W/Vis/curved-sp.pdf)

[Статья про вещественные координаты](https://www.physicsforums.com/threads/coordinates-in-hyperbolic-geometry.311320/)